<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>確認付款（刷卡）</title>
    <link rel="stylesheet" href="./bootstrap/css/bootstrap.css" />
    <link rel="stylesheet" href="./fontawesome/css/all.css" />
    <link rel="stylesheet" href="./credit-card.css" />
    <link rel="stylesheet" href="./share.css" />
  </head>
  <body>
    <nav class="nav-place-zone"></nav>
    <div class="thermometer_container">
      <div class="order_step_title row justify-content-around">
        <p id="order_s_1">商品確認</p>
        <p id="order_s_2">填寫資料</p>
        <p id="order_s_3">確認付款</p>
        <p id="order_s_4">訂單完成</p>
      </div>
      <div class="thermometer_wrap d-flex align-items-center">
        <img
          class="thermometer d-block"
          src="img/thermometer/order_thermometer.svg"
          alt=""
        />

        <!-- <div class="thermometer_line_wrap"> -->
        <div class="thermometer_line">
          <div class="thermometer_move"></div>
        </div>
        <!-- </div> -->
      </div>
      <div class="order_step_number row justify-content-around">
        <p id="order_n_1">01</p>
        <p id="order_n_2">02</p>
        <p id="order_n_3">03</p>
        <p id="order_n_4">04</p>
      </div>
    </div>

    <div class="container">
      <div
        class="row justify-content-center flex-sm-column-reverse flex-column-reverse flex-lg-row flex-md-row"
      >
        <!--  -->
        <div class="col-lg-5 col-md-5 title-in-credit-card">
          <h6>信用卡資訊</h6>

          <div class="credit-card-img text-monospace text-white">
            <div class="flip-card mx-auto position-relative">
              <div class="flip-card-inner">
                <div class="flip-card-front">
                  <img
                    src="./img/creditfront.png"
                    alt="Avatar"
                    style="width: 350px; height: 210px"
                  />
                  <p id="demotext" class="position-absolute">
                    <span class="card-num1-text"></span>
                    <span class="card-num2-text"></span>
                    <span class="card-num3-text"></span>
                    <span class="card-num4-text"></span>
                  </p>
                  <p id="demotextdate" class="position-absolute">
                    <span class="card-date1-text"></span>
                    <span class="there-need-hidden">/</span>
                    <span class="card-date2-text"></span>
                  </p>
                </div>
                <div class="flip-card-back">
                  <img
                    src="./img/creditback.png"
                    alt=""
                    style="width: 350px; height: 210px"
                  />
                  <p id="demotextcvv" class="position-absolute">
                    <span class="cvv-code-text text-black-50"></span>
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="mobile-need-change-padding-all">
            <div class="form-group row">
              <label for="card-num1" class="col-sm-3 col-form-label pl-3"
                >信用卡卡號</label
              >
              <div
                class="col-sm-9 py-1 pr-2 mobile-need-change-padding"
                id="auto-change-input"
              >
                <input
                  type="text"
                  class="form-control3 credit-card-front-info"
                  id="card-num1"
                  maxlength="4"
                /><span class=""> -</span>
                <input
                  type="text"
                  class="form-control3 credit-card-front-info"
                  id="card-num2"
                  maxlength="4"
                /><span class=""> -</span>
                <input
                  type="text"
                  class="form-control3 credit-card-front-info"
                  id="card-num3"
                  maxlength="4"
                /><span class=""> -</span>
                <input
                  type="text"
                  class="form-control3 credit-card-front-info"
                  id="card-num4"
                  maxlength="4"
                />
              </div>
            </div>
            <div class="form-group row">
              <label for="card-date1" class="col-sm-3 col-form-label pl-3"
                >到期年限</label
              >
              <div
                class="col-sm-9 py-1 mobile-need-change-padding pr-2 d-flex"
                id="auto-change-input-two"
              >
                <div class="col-6 p-0">
                  <input
                    type="text"
                    class="form-control4 px-2 credit-card-front-info"
                    maxlength="2"
                    id="card-date1"
                  />
                  <span class="px-2">月</span>
                </div>
                <div class="col-6 p-0">
                  <input
                    type="text"
                    class="form-control4 px-2 credit-card-front-info demo-hidden-trigger"
                    maxlength="2"
                    id="card-date2"
                  />
                  <span class="px-2">年</span>
                </div>
              </div>
            </div>
            <div class="form-group row">
              <label for="cvv-code" class="col-sm-3 col-form-label pl-3"
                >CVV碼</label
              >
              <div class="col-sm-9 py-1 mobile-need-change-padding pr-2">
                <input
                  type="text"
                  class="form-control5"
                  id="cvv-code"
                  maxlength="3"
                />
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-1 col-md-1"></div>
        <div class="col-lg-4 col-md-4">
          <div class="title-in-table d-flex justify-content-between mb-3">
            <p>購物明細</p>
            <a href="#"><i class="fas fa-minus-circle"></i>收起訂單明細</a>
          </div>

          <div class="d-flex justify-content-center">
            <table class="howmuch-you-need-pay">
              <tbody>
                <tr>
                  <th scope="row">商品數量</th>
                  <td>n</td>
                </tr>
                <tr>
                  <th scope="row">商品重量</th>
                  <td>total-weight</td>
                </tr>
                <tr>
                  <th scope="row">商品金額</th>
                  <td>money-sum</td>
                </tr>
                <tr>
                  <th scope="row">運費</th>
                  <td>car-money</td>
                </tr>
                <tr>
                  <th scope="row">優惠折抵</th>
                  <td>bouns</td>
                </tr>
                <tr>
                  <th scope="row">應付金額</th>
                  <td>total</td>
                </tr>
                <tr>
                  <td colspan="2" class="py-2">
                    <a href="#" class="close-features"
                      ><i class="fas fa-plus-circle"></i> 收起訂單明細</a
                    >
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="text-center">
        <button class="btn btn-leave p-0">回到首頁</button>
        <button class="btn btn-leave p-0 hope-next-step">繼續購物</button>
      </div>
    </div>

    <script src="lib/jquery-3.5.1.js"></script>
    <script src="bootstrap/js/bootstrap.bundle.js"></script>

    <script>
      let credit = document.querySelector(".flip-card-inner");
      let cvv = document.querySelector("#cvv-code");
      let demotext = document.querySelector("#demotext");
      let demotextdate = document.querySelector("#demotextdate");
      let number = document.querySelectorAll(".credit-card-front-info");
      // 背面
      cvv.addEventListener("click", function () {
        credit.classList.add("turn-around");
        demotext.classList.add("there-need-hidden");
        demotextdate.classList.add("there-need-hidden");
      });
      //前面
      number.forEach(function (element) {
        element.addEventListener("click", function () {
          credit.classList.remove("turn-around");
          demotext.classList.remove("there-need-hidden");
          demotextdate.classList.remove("there-need-hidden");
        });
      });

      // "/"出現
      $(".demo-hidden-trigger").focus(function () {
        $(".there-need-hidden").css("opacity", "1");
      });

      let allInput = document.getElementById("auto-change-input");
      input = allInput.getElementsByTagName("input");
      let iNow = 0;
      (type = !-[1] ? "onpropertychange" : "oninput"), (limit = 4); //滿足自動切換焦點的字元數
      for (let i = 0; i < input.length - 1; i++) {
        input[i].index = i;
        input[i][type] = function () {
          iNow = this.index;
          let that = this;
          setTimeout(function () {
            that.value.length > limit - 1 && input[iNow + 1].focus();
          }, 0);
        };
      }

      //鍵盤輸入練習

      const $allInput = $(".mobile-need-change-padding-all input");
      $allInput.on("keyup", function () {
        $allInput.each(function () {
          $("." + this.id + "-text").text($(this).val());
        });
      });

      $("#auto-change-input-two input")
        .eq(0)
        .on("keyup", function () {
          if ($(this).val().length == 2) {
            $("#auto-change-input-two input").eq(1).focus();
          }
        });
    </script>
  </body>
</html>
